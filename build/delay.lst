ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"delay.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.delay_init,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.global	delay_init
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	delay_init:
  26              	.LVL0:
  27              	.LFB65:
  28              		.file 1 "user/src/delay.c"
   1:user/src/delay.c **** #include "stm32f1xx.h"
   2:user/src/delay.c **** #include "delay.h"
   3:user/src/delay.c **** 
   4:user/src/delay.c **** static u8  fac_us = 0;//us��ʱ������
   5:user/src/delay.c **** static u16 fac_ms = 0;//ms��ʱ������
   6:user/src/delay.c **** 
   7:user/src/delay.c **** //��ʼ���ӳٺ���
   8:user/src/delay.c **** //SYSTICK��ʱ�ӹ̶�ΪHCLKʱ�ӵ�1/8
   9:user/src/delay.c **** //SYSCLK:ϵͳʱ��
  10:user/src/delay.c **** void delay_init(u8 SYSCLK)
  11:user/src/delay.c **** {
  29              		.loc 1 11 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  12:user/src/delay.c ****   SysTick->CTRL&=0xfffffffb;//bit2���,ѡ���ⲿʱ��  HCLK/8
  34              		.loc 1 12 3 view .LVU1
  35              		.loc 1 12 16 is_stmt 0 view .LVU2
  36 0000 4FF0E022 		mov	r2, #-536813568
  37 0004 1369     		ldr	r3, [r2, #16]
  13:user/src/delay.c ****   fac_us=SYSCLK/8;
  38              		.loc 1 13 9 view .LVU3
  39 0006 C008     		lsrs	r0, r0, #3
  40              	.LVL1:
  12:user/src/delay.c ****   SysTick->CTRL&=0xfffffffb;//bit2���,ѡ���ⲿʱ��  HCLK/8
  41              		.loc 1 12 16 view .LVU4
  42 0008 23F00403 		bic	r3, r3, #4
  11:user/src/delay.c ****   SysTick->CTRL&=0xfffffffb;//bit2���,ѡ���ⲿʱ��  HCLK/8
  43              		.loc 1 11 1 view .LVU5
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s 			page 2


  44 000c 10B4     		push	{r4}
  45              	.LCFI0:
  46              		.cfi_def_cfa_offset 4
  47              		.cfi_offset 4, -4
  12:user/src/delay.c ****   SysTick->CTRL&=0xfffffffb;//bit2���,ѡ���ⲿʱ��  HCLK/8
  48              		.loc 1 12 16 view .LVU6
  49 000e 1361     		str	r3, [r2, #16]
  50              		.loc 1 13 3 is_stmt 1 view .LVU7
  14:user/src/delay.c ****   fac_ms=(u16)fac_us*1000;
  51              		.loc 1 14 9 is_stmt 0 view .LVU8
  52 0010 C0EB4013 		rsb	r3, r0, r0, lsl #5
  13:user/src/delay.c ****   fac_us=SYSCLK/8;
  53              		.loc 1 13 9 view .LVU9
  54 0014 044C     		ldr	r4, .L4
  55              		.loc 1 14 9 view .LVU10
  56 0016 0549     		ldr	r1, .L4+4
  57 0018 00EB8303 		add	r3, r0, r3, lsl #2
  58 001c DB00     		lsls	r3, r3, #3
  13:user/src/delay.c ****   fac_us=SYSCLK/8;
  59              		.loc 1 13 9 view .LVU11
  60 001e 2070     		strb	r0, [r4]
  61              		.loc 1 14 3 is_stmt 1 view .LVU12
  62              		.loc 1 14 9 is_stmt 0 view .LVU13
  63 0020 0B80     		strh	r3, [r1]	@ movhi
  15:user/src/delay.c **** }
  64              		.loc 1 15 1 view .LVU14
  65 0022 10BC     		pop	{r4}
  66              	.LCFI1:
  67              		.cfi_restore 4
  68              		.cfi_def_cfa_offset 0
  69 0024 7047     		bx	lr
  70              	.L5:
  71 0026 00BF     		.align	2
  72              	.L4:
  73 0028 00000000 		.word	.LANCHOR0
  74 002c 00000000 		.word	.LANCHOR1
  75              		.cfi_endproc
  76              	.LFE65:
  78              		.section	.text.delay_ms,"ax",%progbits
  79              		.align	1
  80              		.p2align 2,,3
  81              		.global	delay_ms
  82              		.syntax unified
  83              		.thumb
  84              		.thumb_func
  86              	delay_ms:
  87              	.LVL2:
  88              	.LFB66:
  16:user/src/delay.c **** 
  17:user/src/delay.c **** //��ʱnms
  18:user/src/delay.c **** //ע��nms�ķ�Χ
  19:user/src/delay.c **** //SysTick->LOADΪ24λ�Ĵ���,����,�����ʱΪ:
  20:user/src/delay.c **** //nms<=0xffffff*8*1000/SYSCLK
  21:user/src/delay.c **** //SYSCLK��λΪHz,nms��λΪms
  22:user/src/delay.c **** //��72M������,nms<=1864
  23:user/src/delay.c **** void delay_ms(u16 nms)
  24:user/src/delay.c **** {
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s 			page 3


  89              		.loc 1 24 1 is_stmt 1 view -0
  90              		.cfi_startproc
  91              		@ args = 0, pretend = 0, frame = 0
  92              		@ frame_needed = 0, uses_anonymous_args = 0
  93              		@ link register save eliminated.
  25:user/src/delay.c ****   u32 temp;
  94              		.loc 1 25 3 view .LVU16
  26:user/src/delay.c ****   SysTick->LOAD=(u32)nms*fac_ms;//ʱ�����(SysTick->LOADΪ24bit)
  95              		.loc 1 26 3 view .LVU17
  24:user/src/delay.c ****   u32 temp;
  96              		.loc 1 24 1 is_stmt 0 view .LVU18
  97 0000 10B4     		push	{r4}
  98              	.LCFI2:
  99              		.cfi_def_cfa_offset 4
 100              		.cfi_offset 4, -4
 101              		.loc 1 26 16 view .LVU19
 102 0002 4FF0E022 		mov	r2, #-536813568
  27:user/src/delay.c ****   SysTick->VAL =0x00;           //��ռ�����
 103              		.loc 1 27 16 view .LVU20
 104 0006 0024     		movs	r4, #0
  28:user/src/delay.c ****   SysTick->CTRL=0x01 ;          //��ʼ����
 105              		.loc 1 28 16 view .LVU21
 106 0008 0121     		movs	r1, #1
  26:user/src/delay.c ****   SysTick->VAL =0x00;           //��ռ�����
 107              		.loc 1 26 25 view .LVU22
 108 000a 084B     		ldr	r3, .L11
 109 000c 1B88     		ldrh	r3, [r3]
 110 000e 00FB03F3 		mul	r3, r0, r3
  26:user/src/delay.c ****   SysTick->VAL =0x00;           //��ռ�����
 111              		.loc 1 26 16 view .LVU23
 112 0012 5361     		str	r3, [r2, #20]
  27:user/src/delay.c ****   SysTick->VAL =0x00;           //��ռ�����
 113              		.loc 1 27 3 is_stmt 1 view .LVU24
  27:user/src/delay.c ****   SysTick->VAL =0x00;           //��ռ�����
 114              		.loc 1 27 16 is_stmt 0 view .LVU25
 115 0014 9461     		str	r4, [r2, #24]
 116              		.loc 1 28 3 is_stmt 1 view .LVU26
 117              		.loc 1 28 16 is_stmt 0 view .LVU27
 118 0016 1161     		str	r1, [r2, #16]
 119              	.L7:
  29:user/src/delay.c ****   do
 120              		.loc 1 29 3 is_stmt 1 discriminator 1 view .LVU28
  30:user/src/delay.c ****   {
  31:user/src/delay.c ****      temp=SysTick->CTRL;
 121              		.loc 1 31 6 discriminator 1 view .LVU29
 122              		.loc 1 31 10 is_stmt 0 discriminator 1 view .LVU30
 123 0018 1369     		ldr	r3, [r2, #16]
 124              	.LVL3:
  32:user/src/delay.c ****   }
  33:user/src/delay.c ****   while(temp&0x01&&!(temp&(1<<16)));//�ȴ�ʱ�䵽��
 125              		.loc 1 33 8 is_stmt 1 discriminator 1 view .LVU31
 126              		.loc 1 33 18 is_stmt 0 discriminator 1 view .LVU32
 127 001a 03F00113 		and	r3, r3, #65537
 128              	.LVL4:
 129              		.loc 1 33 3 discriminator 1 view .LVU33
 130 001e 012B     		cmp	r3, #1
 131 0020 FAD0     		beq	.L7
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s 			page 4


  34:user/src/delay.c ****   SysTick->CTRL=0x00;       //�رռ�����
 132              		.loc 1 34 3 is_stmt 1 view .LVU34
 133              		.loc 1 34 16 is_stmt 0 view .LVU35
 134 0022 0023     		movs	r3, #0
  35:user/src/delay.c ****   SysTick->VAL =0X00;       //��ռ�����
  36:user/src/delay.c **** }
 135              		.loc 1 36 1 view .LVU36
 136 0024 10BC     		pop	{r4}
 137              	.LCFI3:
 138              		.cfi_restore 4
 139              		.cfi_def_cfa_offset 0
  34:user/src/delay.c ****   SysTick->CTRL=0x00;       //�رռ�����
 140              		.loc 1 34 16 view .LVU37
 141 0026 1361     		str	r3, [r2, #16]
  35:user/src/delay.c ****   SysTick->VAL =0X00;       //��ռ�����
 142              		.loc 1 35 3 is_stmt 1 view .LVU38
  35:user/src/delay.c ****   SysTick->VAL =0X00;       //��ռ�����
 143              		.loc 1 35 16 is_stmt 0 view .LVU39
 144 0028 9361     		str	r3, [r2, #24]
 145              		.loc 1 36 1 view .LVU40
 146 002a 7047     		bx	lr
 147              	.L12:
 148              		.align	2
 149              	.L11:
 150 002c 00000000 		.word	.LANCHOR1
 151              		.cfi_endproc
 152              	.LFE66:
 154              		.section	.text.delay_us,"ax",%progbits
 155              		.align	1
 156              		.p2align 2,,3
 157              		.global	delay_us
 158              		.syntax unified
 159              		.thumb
 160              		.thumb_func
 162              	delay_us:
 163              	.LVL5:
 164              	.LFB67:
  37:user/src/delay.c **** 
  38:user/src/delay.c **** //��ʱnus
  39:user/src/delay.c **** //nusΪҪ��ʱ��us��.
  40:user/src/delay.c **** void delay_us(u32 nus)
  41:user/src/delay.c **** {
 165              		.loc 1 41 1 is_stmt 1 view -0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 0
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169              		@ link register save eliminated.
  42:user/src/delay.c ****     u32 temp;
 170              		.loc 1 42 5 view .LVU42
  43:user/src/delay.c ****     SysTick->LOAD=nus*fac_us; //ʱ�����
 171              		.loc 1 43 5 view .LVU43
  41:user/src/delay.c ****     u32 temp;
 172              		.loc 1 41 1 is_stmt 0 view .LVU44
 173 0000 10B4     		push	{r4}
 174              	.LCFI4:
 175              		.cfi_def_cfa_offset 4
 176              		.cfi_offset 4, -4
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s 			page 5


 177              		.loc 1 43 18 view .LVU45
 178 0002 4FF0E022 		mov	r2, #-536813568
  44:user/src/delay.c ****     SysTick->VAL=0x00;        //��ռ�����
 179              		.loc 1 44 17 view .LVU46
 180 0006 0024     		movs	r4, #0
  45:user/src/delay.c ****     SysTick->CTRL=0x01 ;      //��ʼ����
 181              		.loc 1 45 18 view .LVU47
 182 0008 0121     		movs	r1, #1
  43:user/src/delay.c ****     SysTick->VAL=0x00;        //��ռ�����
 183              		.loc 1 43 22 view .LVU48
 184 000a 084B     		ldr	r3, .L18
 185 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 186 000e 00FB03F3 		mul	r3, r0, r3
  43:user/src/delay.c ****     SysTick->VAL=0x00;        //��ռ�����
 187              		.loc 1 43 18 view .LVU49
 188 0012 5361     		str	r3, [r2, #20]
  44:user/src/delay.c ****     SysTick->VAL=0x00;        //��ռ�����
 189              		.loc 1 44 5 is_stmt 1 view .LVU50
  44:user/src/delay.c ****     SysTick->VAL=0x00;        //��ռ�����
 190              		.loc 1 44 17 is_stmt 0 view .LVU51
 191 0014 9461     		str	r4, [r2, #24]
 192              		.loc 1 45 5 is_stmt 1 view .LVU52
 193              		.loc 1 45 18 is_stmt 0 view .LVU53
 194 0016 1161     		str	r1, [r2, #16]
 195              	.L14:
  46:user/src/delay.c ****     do
 196              		.loc 1 46 5 is_stmt 1 discriminator 1 view .LVU54
  47:user/src/delay.c ****     {
  48:user/src/delay.c ****         temp=SysTick->CTRL;
 197              		.loc 1 48 9 discriminator 1 view .LVU55
 198              		.loc 1 48 13 is_stmt 0 discriminator 1 view .LVU56
 199 0018 1369     		ldr	r3, [r2, #16]
 200              	.LVL6:
  49:user/src/delay.c ****     }
  50:user/src/delay.c ****     while(temp&0x01&&!(temp&(1<<16)));//�ȴ�ʱ�䵽��
 201              		.loc 1 50 10 is_stmt 1 discriminator 1 view .LVU57
 202              		.loc 1 50 20 is_stmt 0 discriminator 1 view .LVU58
 203 001a 03F00113 		and	r3, r3, #65537
 204              	.LVL7:
 205              		.loc 1 50 5 discriminator 1 view .LVU59
 206 001e 012B     		cmp	r3, #1
 207 0020 FAD0     		beq	.L14
  51:user/src/delay.c ****     SysTick->CTRL=0x00;
 208              		.loc 1 51 5 is_stmt 1 view .LVU60
 209              		.loc 1 51 18 is_stmt 0 view .LVU61
 210 0022 0023     		movs	r3, #0
  52:user/src/delay.c ****     SysTick->VAL =0X00;
  53:user/src/delay.c **** }
 211              		.loc 1 53 1 view .LVU62
 212 0024 10BC     		pop	{r4}
 213              	.LCFI5:
 214              		.cfi_restore 4
 215              		.cfi_def_cfa_offset 0
  51:user/src/delay.c ****     SysTick->CTRL=0x00;
 216              		.loc 1 51 18 view .LVU63
 217 0026 1361     		str	r3, [r2, #16]
  52:user/src/delay.c ****     SysTick->VAL =0X00;
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s 			page 6


 218              		.loc 1 52 5 is_stmt 1 view .LVU64
  52:user/src/delay.c ****     SysTick->VAL =0X00;
 219              		.loc 1 52 18 is_stmt 0 view .LVU65
 220 0028 9361     		str	r3, [r2, #24]
 221              		.loc 1 53 1 view .LVU66
 222 002a 7047     		bx	lr
 223              	.L19:
 224              		.align	2
 225              	.L18:
 226 002c 00000000 		.word	.LANCHOR0
 227              		.cfi_endproc
 228              	.LFE67:
 230              		.section	.bss.fac_ms,"aw",%nobits
 231              		.align	1
 232              		.set	.LANCHOR1,. + 0
 235              	fac_ms:
 236 0000 0000     		.space	2
 237              		.section	.bss.fac_us,"aw",%nobits
 238              		.set	.LANCHOR0,. + 0
 241              	fac_us:
 242 0000 00       		.space	1
 243              		.text
 244              	.Letext0:
 245              		.file 2 "d:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 246              		.file 3 "d:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 247              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
 248              		.file 5 "user/inc/type_define.h"
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 delay.c
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:18     .text.delay_init:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:25     .text.delay_init:00000000 delay_init
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:73     .text.delay_init:00000028 $d
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:79     .text.delay_ms:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:86     .text.delay_ms:00000000 delay_ms
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:150    .text.delay_ms:0000002c $d
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:155    .text.delay_us:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:162    .text.delay_us:00000000 delay_us
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:226    .text.delay_us:0000002c $d
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:231    .bss.fac_ms:00000000 $d
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:235    .bss.fac_ms:00000000 fac_ms
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:241    .bss.fac_us:00000000 fac_us
C:\Users\WENHUA~1\AppData\Local\Temp\cca3di4f.s:242    .bss.fac_us:00000000 $d

NO UNDEFINED SYMBOLS
