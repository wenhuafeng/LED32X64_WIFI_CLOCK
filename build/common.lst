ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"common.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.COMMON_Init.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 74726163 		.ascii	"trace init ok\015\012\000"
  20      6520696E 
  20      6974206F 
  20      6B0D0A00 
  21              		.align	2
  22              	.LC1:
  23 0010 25732C20 		.ascii	"%s, %s, %s\012\000"
  23      25732C20 
  23      25730A00 
  24              		.align	2
  25              	.LC2:
  26 001c 46656220 		.ascii	"Feb 25 2022\000"
  26      32352032 
  26      30323200 
  27              		.align	2
  28              	.LC3:
  29 0028 31353A33 		.ascii	"15:35:03\000"
  29      353A3033 
  29      00
  30 0031 000000   		.align	2
  31              	.LC4:
  32 0034 56313031 		.ascii	"V101\000"
  32      00
  33              		.section	.text.COMMON_Init,"ax",%progbits
  34              		.align	1
  35              		.p2align 2,,3
  36              		.global	COMMON_Init
  37              		.syntax unified
  38              		.thumb
  39              		.thumb_func
  41              	COMMON_Init:
  42              	.LFB70:
  43              		.file 1 "user/common/common.c"
   1:user/common/common.c **** #include "common.h"
   2:user/common/common.c **** #include <stdio.h>
   3:user/common/common.c **** #include <stdbool.h>
   4:user/common/common.c **** #include "main.h"
   5:user/common/common.c **** #include "gpio.h"
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 2


   6:user/common/common.c **** #include "dma.h"
   7:user/common/common.c **** #include "tim.h"
   8:user/common/common.c **** #include "rtc.h"
   9:user/common/common.c **** #include "hub75d.h"
  10:user/common/common.c **** #include "htu21d.h"
  11:user/common/common.c **** #include "lunar_calendar.h"
  12:user/common/common.c **** #if (WIFI_MODULE == WIFI_ESP8266)
  13:user/common/common.c **** #include "esp8266_at.h"
  14:user/common/common.c **** #elif (WIFI_MODULE == WIFI_EMW3060)
  15:user/common/common.c **** #include "emw3060_at.h"
  16:user/common/common.c **** #endif
  17:user/common/common.c **** #include "wifi_uart_if.h"
  18:user/common/common.c **** #include "trace_uart_if.h"
  19:user/common/common.c **** #include "trace_printf.h"
  20:user/common/common.c **** 
  21:user/common/common.c **** #define SOFTWARE_VERSION "V101"
  22:user/common/common.c **** 
  23:user/common/common.c **** bool g_pirInt = false;
  24:user/common/common.c **** 
  25:user/common/common.c **** static void COMMON_EnterStandbyMode(void)
  26:user/common/common.c **** {
  27:user/common/common.c ****     TRACE_PRINTF("enter standby mode\n\r");
  28:user/common/common.c **** 
  29:user/common/common.c ****     /* wifi off */
  30:user/common/common.c ****     WIFI_PowerOnOff(POWER_OFF);
  31:user/common/common.c ****     /* display off */
  32:user/common/common.c ****     HUB75D_DispOnOff(DISP_TIME_OFF);
  33:user/common/common.c ****     /* LED off */
  34:user/common/common.c ****     HAL_GPIO_WritePin(WORK_LED_GPIO_Port, WORK_LED_Pin, GPIO_PIN_SET);
  35:user/common/common.c **** 
  36:user/common/common.c ****     HAL_PWR_EnterSTOPMode(PWR_LOWPOWERREGULATOR_ON, PWR_STOPENTRY_WFI);
  37:user/common/common.c **** 
  38:user/common/common.c ****     HAL_Init();
  39:user/common/common.c ****     /* Configure the system clock */
  40:user/common/common.c ****     SystemClock_Config();
  41:user/common/common.c ****     /* Initialize all configured peripherals */
  42:user/common/common.c ****     MX_GPIO_Init();
  43:user/common/common.c ****     MX_DMA_Init();
  44:user/common/common.c ****     MX_USART1_UART_Init();
  45:user/common/common.c ****     /* Initialize interrupts */
  46:user/common/common.c ****     //MX_NVIC_Init();
  47:user/common/common.c ****     HAL_RTCEx_SetSecond_IT(&hrtc);
  48:user/common/common.c ****     GetClock();
  49:user/common/common.c ****     HAL_Delay(200);
  50:user/common/common.c ****     HTU21D_Init();
  51:user/common/common.c ****     /* wifi init */
  52:user/common/common.c ****     WIFI_PowerOnOff(POWER_ON);
  53:user/common/common.c ****     HAL_Delay(100);
  54:user/common/common.c ****     WIFI_Init();
  55:user/common/common.c ****     WIFI_ReceiveDmaInit();
  56:user/common/common.c ****     //DISP power on
  57:user/common/common.c ****     HUB75D_DispOnOff(DISP_TIME_5MIN);
  58:user/common/common.c ****     HAL_Delay(100);
  59:user/common/common.c ****     MX_TIM4_Init();
  60:user/common/common.c ****     HAL_TIM_Base_Start_IT(&htim4);
  61:user/common/common.c **** 
  62:user/common/common.c ****     TRACE_PRINTF("exit standby mode\n\r");
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 3


  63:user/common/common.c **** }
  64:user/common/common.c **** 
  65:user/common/common.c **** static void IsPirIntFlagSet(void)
  66:user/common/common.c **** {
  67:user/common/common.c ****     if (g_pirInt == false) {
  68:user/common/common.c ****         return;
  69:user/common/common.c ****     }
  70:user/common/common.c ****     g_pirInt = false;
  71:user/common/common.c **** 
  72:user/common/common.c ****     HUB75D_SetDispOffCtr(DISP_TIME_5MIN);
  73:user/common/common.c ****     TRACE_PRINTF("pir interrupt, renew set display 5 minute\r\n");
  74:user/common/common.c **** }
  75:user/common/common.c **** 
  76:user/common/common.c **** void COMMON_Init(void)
  77:user/common/common.c **** {
  44              		.loc 1 77 1 view -0
  45              		.cfi_startproc
  46              		@ args = 0, pretend = 0, frame = 0
  47              		@ frame_needed = 0, uses_anonymous_args = 0
  78:user/common/common.c ****     if (TRACE_Init() != UTIL_ADV_TRACE_OK) {
  48              		.loc 1 78 5 view .LVU1
  77:user/common/common.c ****     if (TRACE_Init() != UTIL_ADV_TRACE_OK) {
  49              		.loc 1 77 1 is_stmt 0 view .LVU2
  50 0000 10B5     		push	{r4, lr}
  51              	.LCFI0:
  52              		.cfi_def_cfa_offset 8
  53              		.cfi_offset 4, -8
  54              		.cfi_offset 14, -4
  55 0002 84B0     		sub	sp, sp, #16
  56              	.LCFI1:
  57              		.cfi_def_cfa_offset 24
  58              		.loc 1 78 9 view .LVU3
  59 0004 FFF7FEFF 		bl	TRACE_Init
  60              	.LVL0:
  61              		.loc 1 78 8 view .LVU4
  62 0008 68B3     		cbz	r0, .L2
  79:user/common/common.c ****         __asm("nop");
  63              		.loc 1 79 9 is_stmt 1 view .LVU5
  64              		.syntax unified
  65              	@ 79 "user/common/common.c" 1
  66 000a 00BF     		nop
  67              	@ 0 "" 2
  68              		.thumb
  69              		.syntax unified
  70              	.L3:
  80:user/common/common.c ****     } else {
  81:user/common/common.c ****         TRACE_PRINTF("trace init ok\r\n");
  71              		.loc 1 81 9 discriminator 1 view .LVU6
  82:user/common/common.c ****     }
  83:user/common/common.c **** 
  84:user/common/common.c ****     WIFI_ReceiveDmaInit();
  72              		.loc 1 84 5 discriminator 1 view .LVU7
  73 000c FFF7FEFF 		bl	WIFI_ReceiveDmaInit
  74              	.LVL1:
  85:user/common/common.c ****     WIFI_PowerOnOff(POWER_ON);
  75              		.loc 1 85 5 discriminator 1 view .LVU8
  76 0010 0120     		movs	r0, #1
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 4


  77 0012 FFF7FEFF 		bl	WIFI_PowerOnOff
  78              	.LVL2:
  86:user/common/common.c ****     HAL_RTCEx_SetSecond_IT(&hrtc);
  79              		.loc 1 86 5 discriminator 1 view .LVU9
  80 0016 1748     		ldr	r0, .L6
  81 0018 FFF7FEFF 		bl	HAL_RTCEx_SetSecond_IT
  82              	.LVL3:
  87:user/common/common.c ****     HAL_Delay(200);
  83              		.loc 1 87 5 discriminator 1 view .LVU10
  84 001c C820     		movs	r0, #200
  85 001e FFF7FEFF 		bl	HAL_Delay
  86              	.LVL4:
  88:user/common/common.c ****     HTU21D_Init();
  87              		.loc 1 88 5 discriminator 1 view .LVU11
  88 0022 FFF7FEFF 		bl	HTU21D_Init
  89              	.LVL5:
  89:user/common/common.c ****     HAL_Delay(100);
  90              		.loc 1 89 5 discriminator 1 view .LVU12
  91 0026 6420     		movs	r0, #100
  92 0028 FFF7FEFF 		bl	HAL_Delay
  93              	.LVL6:
  90:user/common/common.c ****     GetClock();
  94              		.loc 1 90 5 discriminator 1 view .LVU13
  95 002c FFF7FEFF 		bl	GetClock
  96              	.LVL7:
  91:user/common/common.c ****     CalculationLunarCalendar(GetTimeData());
  97              		.loc 1 91 5 discriminator 1 view .LVU14
  98 0030 FFF7FEFF 		bl	GetTimeData
  99              	.LVL8:
 100 0034 FFF7FEFF 		bl	CalculationLunarCalendar
 101              	.LVL9:
  92:user/common/common.c ****     HUB75D_DispOnOff(DISP_TIME_5MIN);
 102              		.loc 1 92 5 discriminator 1 view .LVU15
 103 0038 4FF49670 		mov	r0, #300
 104 003c FFF7FEFF 		bl	HUB75D_DispOnOff
 105              	.LVL10:
  93:user/common/common.c ****     HAL_TIM_Base_Start_IT(&htim4);
 106              		.loc 1 93 5 discriminator 1 view .LVU16
 107 0040 0D48     		ldr	r0, .L6+4
 108 0042 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 109              	.LVL11:
  94:user/common/common.c ****     WIFI_Init();
 110              		.loc 1 94 5 discriminator 1 view .LVU17
 111 0046 FFF7FEFF 		bl	WIFI_Init
 112              	.LVL12:
  95:user/common/common.c **** 
  96:user/common/common.c ****     TRACE_PRINTF("%s, %s, %s\n", SOFTWARE_VERSION, __TIME__, __DATE__);
 113              		.loc 1 96 5 discriminator 1 view .LVU18
 114              		.loc 1 96 5 discriminator 1 view .LVU19
 115 004a 0022     		movs	r2, #0
 116 004c 0B4C     		ldr	r4, .L6+8
 117 004e 0C48     		ldr	r0, .L6+12
 118 0050 0C49     		ldr	r1, .L6+16
 119 0052 CDE90104 		strd	r0, r4, [sp, #4]
 120 0056 0091     		str	r1, [sp]
 121 0058 1046     		mov	r0, r2
 122 005a 1146     		mov	r1, r2
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 5


 123 005c 0A4B     		ldr	r3, .L6+20
 124 005e FFF7FEFF 		bl	TRACE_COND_FSend
 125              	.LVL13:
 126              		.loc 1 96 5 discriminator 1 view .LVU20
  97:user/common/common.c **** }
 127              		.loc 1 97 1 is_stmt 0 discriminator 1 view .LVU21
 128 0062 04B0     		add	sp, sp, #16
 129              	.LCFI2:
 130              		.cfi_remember_state
 131              		.cfi_def_cfa_offset 8
 132              		@ sp needed
 133 0064 10BD     		pop	{r4, pc}
 134              	.L2:
 135              	.LCFI3:
 136              		.cfi_restore_state
 137 0066 0246     		mov	r2, r0
  81:user/common/common.c ****     }
 138              		.loc 1 81 9 is_stmt 1 view .LVU22
  81:user/common/common.c ****     }
 139              		.loc 1 81 9 view .LVU23
 140 0068 0146     		mov	r1, r0
 141 006a 084B     		ldr	r3, .L6+24
 142 006c FFF7FEFF 		bl	TRACE_COND_FSend
 143              	.LVL14:
 144 0070 CCE7     		b	.L3
 145              	.L7:
 146 0072 00BF     		.align	2
 147              	.L6:
 148 0074 00000000 		.word	hrtc
 149 0078 00000000 		.word	htim4
 150 007c 1C000000 		.word	.LC2
 151 0080 28000000 		.word	.LC3
 152 0084 34000000 		.word	.LC4
 153 0088 10000000 		.word	.LC1
 154 008c 00000000 		.word	.LC0
 155              		.cfi_endproc
 156              	.LFE70:
 158              		.section	.rodata.COMMON_Process.str1.4,"aMS",%progbits,1
 159              		.align	2
 160              	.LC5:
 161 0000 70697220 		.ascii	"pir interrupt, renew set display 5 minute\015\012\000"
 161      696E7465 
 161      72727570 
 161      742C2072 
 161      656E6577 
 162              		.align	2
 163              	.LC6:
 164 002c 656E7465 		.ascii	"enter standby mode\012\015\000"
 164      72207374 
 164      616E6462 
 164      79206D6F 
 164      64650A0D 
 165 0041 000000   		.align	2
 166              	.LC7:
 167 0044 65786974 		.ascii	"exit standby mode\012\015\000"
 167      20737461 
 167      6E646279 
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 6


 167      206D6F64 
 167      650A0D00 
 168              		.section	.text.COMMON_Process,"ax",%progbits
 169              		.align	1
 170              		.p2align 2,,3
 171              		.global	COMMON_Process
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 176              	COMMON_Process:
 177              	.LFB71:
  98:user/common/common.c **** 
  99:user/common/common.c **** void COMMON_Process(void)
 100:user/common/common.c **** {
 178              		.loc 1 100 1 view -0
 179              		.cfi_startproc
 180              		@ args = 0, pretend = 0, frame = 0
 181              		@ frame_needed = 0, uses_anonymous_args = 0
 101:user/common/common.c ****     IsPirIntFlagSet();
 182              		.loc 1 101 5 view .LVU25
 183              	.LBB6:
 184              	.LBI6:
  65:user/common/common.c **** {
 185              		.loc 1 65 13 view .LVU26
 186              	.LBB7:
  67:user/common/common.c ****         return;
 187              		.loc 1 67 5 view .LVU27
  67:user/common/common.c ****         return;
 188              		.loc 1 67 18 is_stmt 0 view .LVU28
 189 0000 3A4B     		ldr	r3, .L26
 190              	.LBE7:
 191              	.LBE6:
 100:user/common/common.c ****     IsPirIntFlagSet();
 192              		.loc 1 100 1 view .LVU29
 193 0002 10B5     		push	{r4, lr}
 194              	.LCFI4:
 195              		.cfi_def_cfa_offset 8
 196              		.cfi_offset 4, -8
 197              		.cfi_offset 14, -4
 198              	.LBB9:
 199              	.LBB8:
  67:user/common/common.c ****         return;
 200              		.loc 1 67 8 view .LVU30
 201 0004 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 202 0006 5AB1     		cbz	r2, .L9
  70:user/common/common.c **** 
 203              		.loc 1 70 5 is_stmt 1 view .LVU31
  70:user/common/common.c **** 
 204              		.loc 1 70 14 is_stmt 0 view .LVU32
 205 0008 0024     		movs	r4, #0
  72:user/common/common.c ****     TRACE_PRINTF("pir interrupt, renew set display 5 minute\r\n");
 206              		.loc 1 72 5 view .LVU33
 207 000a 4FF49670 		mov	r0, #300
  70:user/common/common.c **** 
 208              		.loc 1 70 14 view .LVU34
 209 000e 1C70     		strb	r4, [r3]
  72:user/common/common.c ****     TRACE_PRINTF("pir interrupt, renew set display 5 minute\r\n");
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 7


 210              		.loc 1 72 5 is_stmt 1 view .LVU35
 211 0010 FFF7FEFF 		bl	HUB75D_SetDispOffCtr
 212              	.LVL15:
  73:user/common/common.c **** }
 213              		.loc 1 73 5 view .LVU36
  73:user/common/common.c **** }
 214              		.loc 1 73 5 view .LVU37
 215 0014 2246     		mov	r2, r4
 216 0016 2146     		mov	r1, r4
 217 0018 2046     		mov	r0, r4
 218 001a 354B     		ldr	r3, .L26+4
 219 001c FFF7FEFF 		bl	TRACE_COND_FSend
 220              	.LVL16:
 221              	.L9:
  73:user/common/common.c **** }
 222              		.loc 1 73 5 view .LVU38
 223              	.LBE8:
 224              	.LBE9:
 102:user/common/common.c ****     WIFI_HandlerUartData();
 225              		.loc 1 102 5 view .LVU39
 226 0020 FFF7FEFF 		bl	WIFI_HandlerUartData
 227              	.LVL17:
 103:user/common/common.c ****     if (Get1sFlag() == true) {
 228              		.loc 1 103 5 view .LVU40
 229              		.loc 1 103 9 is_stmt 0 view .LVU41
 230 0024 FFF7FEFF 		bl	Get1sFlag
 231              	.LVL18:
 232              		.loc 1 103 8 view .LVU42
 233 0028 00B9     		cbnz	r0, .L24
 234              	.L8:
 104:user/common/common.c ****         Set1sFlag(false);
 105:user/common/common.c ****         WIFI_CtrDec();
 106:user/common/common.c ****         HTU21D_Sampling();
 107:user/common/common.c ****         if (ClockRun() == true) {
 108:user/common/common.c ****             CalculationLunarCalendar(GetTimeData());
 109:user/common/common.c ****         }
 110:user/common/common.c ****         HUB75D_CalculateCalendar(GetTimeData());
 111:user/common/common.c ****         if (HUB75D_CtrDec() == true) {
 112:user/common/common.c ****             COMMON_EnterStandbyMode();
 113:user/common/common.c ****         }
 114:user/common/common.c ****     }
 115:user/common/common.c **** }
 235              		.loc 1 115 1 view .LVU43
 236 002a 10BD     		pop	{r4, pc}
 237              	.L24:
 104:user/common/common.c ****         Set1sFlag(false);
 238              		.loc 1 104 9 is_stmt 1 view .LVU44
 239 002c 0020     		movs	r0, #0
 240 002e FFF7FEFF 		bl	Set1sFlag
 241              	.LVL19:
 105:user/common/common.c ****         HTU21D_Sampling();
 242              		.loc 1 105 9 view .LVU45
 243 0032 FFF7FEFF 		bl	WIFI_CtrDec
 244              	.LVL20:
 106:user/common/common.c ****         if (ClockRun() == true) {
 245              		.loc 1 106 9 view .LVU46
 246 0036 FFF7FEFF 		bl	HTU21D_Sampling
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 8


 247              	.LVL21:
 107:user/common/common.c ****             CalculationLunarCalendar(GetTimeData());
 248              		.loc 1 107 9 view .LVU47
 107:user/common/common.c ****             CalculationLunarCalendar(GetTimeData());
 249              		.loc 1 107 13 is_stmt 0 view .LVU48
 250 003a FFF7FEFF 		bl	ClockRun
 251              	.LVL22:
 107:user/common/common.c ****             CalculationLunarCalendar(GetTimeData());
 252              		.loc 1 107 12 view .LVU49
 253 003e 0028     		cmp	r0, #0
 254 0040 4FD1     		bne	.L25
 255              	.L12:
 110:user/common/common.c ****         if (HUB75D_CtrDec() == true) {
 256              		.loc 1 110 9 is_stmt 1 view .LVU50
 257 0042 FFF7FEFF 		bl	GetTimeData
 258              	.LVL23:
 259 0046 FFF7FEFF 		bl	HUB75D_CalculateCalendar
 260              	.LVL24:
 111:user/common/common.c ****             COMMON_EnterStandbyMode();
 261              		.loc 1 111 9 view .LVU51
 111:user/common/common.c ****             COMMON_EnterStandbyMode();
 262              		.loc 1 111 13 is_stmt 0 view .LVU52
 263 004a FFF7FEFF 		bl	HUB75D_CtrDec
 264              	.LVL25:
 111:user/common/common.c ****             COMMON_EnterStandbyMode();
 265              		.loc 1 111 12 view .LVU53
 266 004e 0028     		cmp	r0, #0
 267 0050 EBD0     		beq	.L8
 112:user/common/common.c ****         }
 268              		.loc 1 112 13 is_stmt 1 view .LVU54
 269              	.LBB10:
 270              	.LBI10:
  25:user/common/common.c **** {
 271              		.loc 1 25 13 view .LVU55
 272              	.LBB11:
  27:user/common/common.c **** 
 273              		.loc 1 27 5 view .LVU56
  27:user/common/common.c **** 
 274              		.loc 1 27 5 view .LVU57
 275 0052 0022     		movs	r2, #0
 276 0054 274B     		ldr	r3, .L26+8
 277 0056 1146     		mov	r1, r2
 278 0058 1046     		mov	r0, r2
 279 005a FFF7FEFF 		bl	TRACE_COND_FSend
 280              	.LVL26:
  27:user/common/common.c **** 
 281              		.loc 1 27 5 view .LVU58
  30:user/common/common.c ****     /* display off */
 282              		.loc 1 30 5 view .LVU59
 283 005e 0020     		movs	r0, #0
 284 0060 FFF7FEFF 		bl	WIFI_PowerOnOff
 285              	.LVL27:
  32:user/common/common.c ****     /* LED off */
 286              		.loc 1 32 5 view .LVU60
 287 0064 0020     		movs	r0, #0
 288 0066 FFF7FEFF 		bl	HUB75D_DispOnOff
 289              	.LVL28:
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 9


  34:user/common/common.c **** 
 290              		.loc 1 34 5 view .LVU61
 291 006a 0122     		movs	r2, #1
 292 006c 4FF48051 		mov	r1, #4096
 293 0070 2148     		ldr	r0, .L26+12
 294 0072 FFF7FEFF 		bl	HAL_GPIO_WritePin
 295              	.LVL29:
  36:user/common/common.c **** 
 296              		.loc 1 36 5 view .LVU62
 297 0076 0121     		movs	r1, #1
 298 0078 0846     		mov	r0, r1
 299 007a FFF7FEFF 		bl	HAL_PWR_EnterSTOPMode
 300              	.LVL30:
  38:user/common/common.c ****     /* Configure the system clock */
 301              		.loc 1 38 5 view .LVU63
 302 007e FFF7FEFF 		bl	HAL_Init
 303              	.LVL31:
  40:user/common/common.c ****     /* Initialize all configured peripherals */
 304              		.loc 1 40 5 view .LVU64
 305 0082 FFF7FEFF 		bl	SystemClock_Config
 306              	.LVL32:
  42:user/common/common.c ****     MX_DMA_Init();
 307              		.loc 1 42 5 view .LVU65
 308 0086 FFF7FEFF 		bl	MX_GPIO_Init
 309              	.LVL33:
  43:user/common/common.c ****     MX_USART1_UART_Init();
 310              		.loc 1 43 5 view .LVU66
 311 008a FFF7FEFF 		bl	MX_DMA_Init
 312              	.LVL34:
  44:user/common/common.c ****     /* Initialize interrupts */
 313              		.loc 1 44 5 view .LVU67
 314 008e FFF7FEFF 		bl	MX_USART1_UART_Init
 315              	.LVL35:
  47:user/common/common.c ****     GetClock();
 316              		.loc 1 47 5 view .LVU68
 317 0092 1A48     		ldr	r0, .L26+16
 318 0094 FFF7FEFF 		bl	HAL_RTCEx_SetSecond_IT
 319              	.LVL36:
  48:user/common/common.c ****     HAL_Delay(200);
 320              		.loc 1 48 5 view .LVU69
 321 0098 FFF7FEFF 		bl	GetClock
 322              	.LVL37:
  49:user/common/common.c ****     HTU21D_Init();
 323              		.loc 1 49 5 view .LVU70
 324 009c C820     		movs	r0, #200
 325 009e FFF7FEFF 		bl	HAL_Delay
 326              	.LVL38:
  50:user/common/common.c ****     /* wifi init */
 327              		.loc 1 50 5 view .LVU71
 328 00a2 FFF7FEFF 		bl	HTU21D_Init
 329              	.LVL39:
  52:user/common/common.c ****     HAL_Delay(100);
 330              		.loc 1 52 5 view .LVU72
 331 00a6 0120     		movs	r0, #1
 332 00a8 FFF7FEFF 		bl	WIFI_PowerOnOff
 333              	.LVL40:
  53:user/common/common.c ****     WIFI_Init();
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 10


 334              		.loc 1 53 5 view .LVU73
 335 00ac 6420     		movs	r0, #100
 336 00ae FFF7FEFF 		bl	HAL_Delay
 337              	.LVL41:
  54:user/common/common.c ****     WIFI_ReceiveDmaInit();
 338              		.loc 1 54 5 view .LVU74
 339 00b2 FFF7FEFF 		bl	WIFI_Init
 340              	.LVL42:
  55:user/common/common.c ****     //DISP power on
 341              		.loc 1 55 5 view .LVU75
 342 00b6 FFF7FEFF 		bl	WIFI_ReceiveDmaInit
 343              	.LVL43:
  57:user/common/common.c ****     HAL_Delay(100);
 344              		.loc 1 57 5 view .LVU76
 345 00ba 4FF49670 		mov	r0, #300
 346 00be FFF7FEFF 		bl	HUB75D_DispOnOff
 347              	.LVL44:
  58:user/common/common.c ****     MX_TIM4_Init();
 348              		.loc 1 58 5 view .LVU77
 349 00c2 6420     		movs	r0, #100
 350 00c4 FFF7FEFF 		bl	HAL_Delay
 351              	.LVL45:
  59:user/common/common.c ****     HAL_TIM_Base_Start_IT(&htim4);
 352              		.loc 1 59 5 view .LVU78
 353 00c8 FFF7FEFF 		bl	MX_TIM4_Init
 354              	.LVL46:
  60:user/common/common.c **** 
 355              		.loc 1 60 5 view .LVU79
 356 00cc 0C48     		ldr	r0, .L26+20
 357 00ce FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 358              	.LVL47:
  62:user/common/common.c **** }
 359              		.loc 1 62 5 view .LVU80
  62:user/common/common.c **** }
 360              		.loc 1 62 5 view .LVU81
 361              	.LBE11:
 362              	.LBE10:
 363              		.loc 1 115 1 is_stmt 0 view .LVU82
 364 00d2 BDE81040 		pop	{r4, lr}
 365              	.LCFI5:
 366              		.cfi_remember_state
 367              		.cfi_restore 14
 368              		.cfi_restore 4
 369              		.cfi_def_cfa_offset 0
 370              	.LBB13:
 371              	.LBB12:
  62:user/common/common.c **** }
 372              		.loc 1 62 5 view .LVU83
 373 00d6 0022     		movs	r2, #0
 374 00d8 0A4B     		ldr	r3, .L26+24
 375 00da 1146     		mov	r1, r2
 376 00dc 1046     		mov	r0, r2
 377 00de FFF7FEBF 		b	TRACE_COND_FSend
 378              	.LVL48:
 379              	.L25:
 380              	.LCFI6:
 381              		.cfi_restore_state
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 11


 382              	.LBE12:
 383              	.LBE13:
 108:user/common/common.c ****         }
 384              		.loc 1 108 13 is_stmt 1 view .LVU84
 385 00e2 FFF7FEFF 		bl	GetTimeData
 386              	.LVL49:
 387 00e6 FFF7FEFF 		bl	CalculationLunarCalendar
 388              	.LVL50:
 389 00ea AAE7     		b	.L12
 390              	.L27:
 391              		.align	2
 392              	.L26:
 393 00ec 00000000 		.word	.LANCHOR0
 394 00f0 00000000 		.word	.LC5
 395 00f4 2C000000 		.word	.LC6
 396 00f8 000C0140 		.word	1073810432
 397 00fc 00000000 		.word	hrtc
 398 0100 00000000 		.word	htim4
 399 0104 44000000 		.word	.LC7
 400              		.cfi_endproc
 401              	.LFE71:
 403              		.section	.text.HAL_GPIO_EXTI_Callback,"ax",%progbits
 404              		.align	1
 405              		.p2align 2,,3
 406              		.global	HAL_GPIO_EXTI_Callback
 407              		.syntax unified
 408              		.thumb
 409              		.thumb_func
 411              	HAL_GPIO_EXTI_Callback:
 412              	.LVL51:
 413              	.LFB72:
 116:user/common/common.c **** 
 117:user/common/common.c **** void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin)
 118:user/common/common.c **** {
 414              		.loc 1 118 1 view -0
 415              		.cfi_startproc
 416              		@ args = 0, pretend = 0, frame = 0
 417              		@ frame_needed = 0, uses_anonymous_args = 0
 418              		@ link register save eliminated.
 119:user/common/common.c ****     if (GPIO_Pin == GPIO_PIN_0) {
 419              		.loc 1 119 5 view .LVU86
 420              		.loc 1 119 8 is_stmt 0 view .LVU87
 421 0000 0128     		cmp	r0, #1
 120:user/common/common.c ****         g_pirInt = true;
 422              		.loc 1 120 9 is_stmt 1 view .LVU88
 423              		.loc 1 120 18 is_stmt 0 view .LVU89
 424 0002 04BF     		itt	eq
 425 0004 014B     		ldreq	r3, .L30
 426 0006 1870     		strbeq	r0, [r3]
 121:user/common/common.c ****     }
 122:user/common/common.c **** }
 427              		.loc 1 122 1 view .LVU90
 428 0008 7047     		bx	lr
 429              	.L31:
 430 000a 00BF     		.align	2
 431              	.L30:
 432 000c 00000000 		.word	.LANCHOR0
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 12


 433              		.cfi_endproc
 434              	.LFE72:
 436              		.section	.text.HAL_UART_TxCpltCallback,"ax",%progbits
 437              		.align	1
 438              		.p2align 2,,3
 439              		.global	HAL_UART_TxCpltCallback
 440              		.syntax unified
 441              		.thumb
 442              		.thumb_func
 444              	HAL_UART_TxCpltCallback:
 445              	.LVL52:
 446              	.LFB73:
 123:user/common/common.c **** 
 124:user/common/common.c **** void HAL_UART_TxCpltCallback(UART_HandleTypeDef *huart)
 125:user/common/common.c **** {
 447              		.loc 1 125 1 is_stmt 1 view -0
 448              		.cfi_startproc
 449              		@ args = 0, pretend = 0, frame = 0
 450              		@ frame_needed = 0, uses_anonymous_args = 0
 451              		@ link register save eliminated.
 126:user/common/common.c ****     if (huart->Instance == USART1) {
 452              		.loc 1 126 5 view .LVU92
 453              		.loc 1 126 8 is_stmt 0 view .LVU93
 454 0000 054A     		ldr	r2, .L37
 455              		.loc 1 126 14 view .LVU94
 456 0002 0368     		ldr	r3, [r0]
 457              		.loc 1 126 8 view .LVU95
 458 0004 9342     		cmp	r3, r2
 459 0006 03D0     		beq	.L35
 127:user/common/common.c ****         WIFI_UART_TxCpltCallback(huart);
 128:user/common/common.c ****     } else if (huart->Instance == USART2) {
 460              		.loc 1 128 12 is_stmt 1 view .LVU96
 461              		.loc 1 128 15 is_stmt 0 view .LVU97
 462 0008 044A     		ldr	r2, .L37+4
 463 000a 9342     		cmp	r3, r2
 464 000c 02D0     		beq	.L36
 129:user/common/common.c ****         TRACE_UART_TxCpltCallback(huart);
 130:user/common/common.c ****     }
 131:user/common/common.c **** }
 465              		.loc 1 131 1 view .LVU98
 466 000e 7047     		bx	lr
 467              	.L35:
 127:user/common/common.c ****         WIFI_UART_TxCpltCallback(huart);
 468              		.loc 1 127 9 is_stmt 1 view .LVU99
 469 0010 FFF7FEBF 		b	WIFI_UART_TxCpltCallback
 470              	.LVL53:
 471              	.L36:
 129:user/common/common.c ****         TRACE_UART_TxCpltCallback(huart);
 472              		.loc 1 129 9 view .LVU100
 473 0014 FFF7FEBF 		b	TRACE_UART_TxCpltCallback
 474              	.LVL54:
 475              	.L38:
 129:user/common/common.c ****         TRACE_UART_TxCpltCallback(huart);
 476              		.loc 1 129 9 is_stmt 0 view .LVU101
 477              		.align	2
 478              	.L37:
 479 0018 00380140 		.word	1073821696
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 13


 480 001c 00440040 		.word	1073759232
 481              		.cfi_endproc
 482              	.LFE73:
 484              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 485              		.align	1
 486              		.p2align 2,,3
 487              		.global	HAL_UART_RxCpltCallback
 488              		.syntax unified
 489              		.thumb
 490              		.thumb_func
 492              	HAL_UART_RxCpltCallback:
 493              	.LVL55:
 494              	.LFB74:
 132:user/common/common.c **** 
 133:user/common/common.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)
 134:user/common/common.c **** {
 495              		.loc 1 134 1 is_stmt 1 view -0
 496              		.cfi_startproc
 497              		@ args = 0, pretend = 0, frame = 0
 498              		@ frame_needed = 0, uses_anonymous_args = 0
 499              		@ link register save eliminated.
 135:user/common/common.c ****     if (huart->Instance == USART1) {
 500              		.loc 1 135 5 view .LVU103
 501              		.loc 1 135 8 is_stmt 0 view .LVU104
 502 0000 054A     		ldr	r2, .L44
 503              		.loc 1 135 14 view .LVU105
 504 0002 0368     		ldr	r3, [r0]
 505              		.loc 1 135 8 view .LVU106
 506 0004 9342     		cmp	r3, r2
 507 0006 03D0     		beq	.L42
 136:user/common/common.c ****         WIFI_UART_RxCpltCallback(huart);
 137:user/common/common.c ****     } else if (huart->Instance == USART2) {
 508              		.loc 1 137 12 is_stmt 1 view .LVU107
 509              		.loc 1 137 15 is_stmt 0 view .LVU108
 510 0008 044A     		ldr	r2, .L44+4
 511 000a 9342     		cmp	r3, r2
 512 000c 02D0     		beq	.L43
 138:user/common/common.c ****         TRACE_UART_RxCpltCallback(huart);
 139:user/common/common.c ****     }
 140:user/common/common.c **** }...
 513              		.loc 1 140 1 view .LVU109
 514 000e 7047     		bx	lr
 515              	.L42:
 136:user/common/common.c ****         WIFI_UART_RxCpltCallback(huart);
 516              		.loc 1 136 9 is_stmt 1 view .LVU110
 517 0010 FFF7FEBF 		b	WIFI_UART_RxCpltCallback
 518              	.LVL56:
 519              	.L43:
 138:user/common/common.c ****         TRACE_UART_RxCpltCallback(huart);
 520              		.loc 1 138 9 view .LVU111
 521 0014 FFF7FEBF 		b	TRACE_UART_RxCpltCallback
 522              	.LVL57:
 523              	.L45:
 138:user/common/common.c ****         TRACE_UART_RxCpltCallback(huart);
 524              		.loc 1 138 9 is_stmt 0 view .LVU112
 525              		.align	2
 526              	.L44:
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 14


 527 0018 00380140 		.word	1073821696
 528 001c 00440040 		.word	1073759232
 529              		.cfi_endproc
 530              	.LFE74:
 532              		.global	g_pirInt
 533              		.section	.bss.g_pirInt,"aw",%nobits
 534              		.set	.LANCHOR0,. + 0
 537              	g_pirInt:
 538 0000 00       		.space	1
 539              		.text
 540              	.Letext0:
 541              		.file 2 "d:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 542              		.file 3 "d:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 543              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 544              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 545              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 546              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 547              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rtc.h"
 548              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_tim.h"
 549              		.file 10 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 550              		.file 11 "Core/Inc/tim.h"
 551              		.file 12 "Core/Inc/rtc.h"
 552              		.file 13 "user/hub75d/hub75d.h"
 553              		.file 14 "user/esp8266/esp8266_at.h"
 554              		.file 15 "user/trace/trace.h"
 555              		.file 16 "user/wifi_uart_if/wifi_uart_if.h"
 556              		.file 17 "user/trace/trace_uart_if.h"
 557              		.file 18 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_pwr.h"
 558              		.file 19 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 559              		.file 20 "Core/Inc/main.h"
 560              		.file 21 "Core/Inc/gpio.h"
 561              		.file 22 "Core/Inc/dma.h"
 562              		.file 23 "Core/Inc/usart.h"
 563              		.file 24 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_rtc_ex.h"
 564              		.file 25 "user/time/time.h"
 565              		.file 26 "user/htu21d/htu21d.h"
 566              		.file 27 "user/lunar_calendar/lunar_calendar.h"
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 15


DEFINED SYMBOLS
                            *ABS*:00000000 common.c
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:18     .rodata.COMMON_Init.str1.4:00000000 $d
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:34     .text.COMMON_Init:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:41     .text.COMMON_Init:00000000 COMMON_Init
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:148    .text.COMMON_Init:00000074 $d
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:159    .rodata.COMMON_Process.str1.4:00000000 $d
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:169    .text.COMMON_Process:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:176    .text.COMMON_Process:00000000 COMMON_Process
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:393    .text.COMMON_Process:000000ec $d
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:404    .text.HAL_GPIO_EXTI_Callback:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:411    .text.HAL_GPIO_EXTI_Callback:00000000 HAL_GPIO_EXTI_Callback
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:432    .text.HAL_GPIO_EXTI_Callback:0000000c $d
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:437    .text.HAL_UART_TxCpltCallback:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:444    .text.HAL_UART_TxCpltCallback:00000000 HAL_UART_TxCpltCallback
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:479    .text.HAL_UART_TxCpltCallback:00000018 $d
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:485    .text.HAL_UART_RxCpltCallback:00000000 $t
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:492    .text.HAL_UART_RxCpltCallback:00000000 HAL_UART_RxCpltCallback
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:527    .text.HAL_UART_RxCpltCallback:00000018 $d
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:537    .bss.g_pirInt:00000000 g_pirInt
C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s:538    .bss.g_pirInt:00000000 $d

UNDEFINED SYMBOLS
TRACE_Init
WIFI_ReceiveDmaInit
WIFI_PowerOnOff
HAL_RTCEx_SetSecond_IT
HAL_Delay
HTU21D_Init
GetClock
GetTimeData
CalculationLunarCalendar
HUB75D_DispOnOff
HAL_TIM_Base_Start_IT
WIFI_Init
TRACE_COND_FSend
hrtc
htim4
HUB75D_SetDispOffCtr
WIFI_HandlerUartData
Get1sFlag
Set1sFlag
WIFI_CtrDec
HTU21D_Sampling
ClockRun
HUB75D_CalculateCalendar
HUB75D_CtrDec
HAL_GPIO_WritePin
HAL_PWR_EnterSTOPMode
HAL_Init
SystemClock_Config
MX_GPIO_Init
MX_DMA_Init
MX_USART1_UART_Init
MX_TIM4_Init
WIFI_UART_TxCpltCallback
TRACE_UART_TxCpltCallback
ARM GAS  C:\Users\WENHUA~1\AppData\Local\Temp\ccjnpEdr.s 			page 16


WIFI_UART_RxCpltCallback
TRACE_UART_RxCpltCallback
